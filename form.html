<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ูุธุงู ุชูููู ุงููุจุงูู ุงููุฏุฑุณูุฉ</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: "Tajawal", sans-serif;
      margin: 0;
      background: #f5f7fa;
    }

    .filters {
      background: #f9fbfd;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    .filters h2 {
      margin-bottom: 15px;
      color: #13344f;
      text-align: center;
    }
    .filters label {
      display: block;
      margin-bottom: 15px;
      font-weight: bold;
    }
    .filters select,
    .filters input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
      box-sizing: border-box;
    }

    #evaluationForm {
      display: none;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-navigation {
      text-align: center;
      margin-top: 20px;
    }
    .form-navigation button {
      margin: 5px;
      padding: 10px 25px;
      background: #13344f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }
    .form-navigation button:hover {
      background: #0e2233;
    }
  </style>
</head>
<body>

  <!-- โ ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู -->
  <script>
    if (localStorage.getItem("loggedIn") !== "true") {
      window.location.href = "login.html";
    }
  </script>

  <!-- ุงูููุฏุฑ -->
  <header class="main-header">
    <img src="logo.png" alt="ุดุนุงุฑ ุดุฑูุฉ ุณูุงูุง" class="logo">
    <h1>ุดุฑูุฉ ุณูุงูุง</h1>
    <h2 class="subtitle">ูุธุงู ุชูููู ุงููุจุงูู ุงููุฏุฑุณูุฉ</h2>
  </header>

  <main class="container">

    <!-- ูุณู ุงูููุงุชุฑ -->
    <section class="filters">
      <h2>ุงุฎุชูุงุฑ ุงููุฏุฑุณุฉ</h2>

      <label>ุงูููุทูุฉ:
        <select id="regionFilter">
          <option value="">ุงุฎุชุฑ ุงูููุทูุฉ</option>
        </select>
      </label>

      <label>ุงููุฏููุฉ:
        <select id="cityFilter" disabled>
          <option value="">ุงุฎุชุฑ ุงููุฏููุฉ</option>
        </select>
      </label>

      <label>ุงููุฏุฑุณุฉ:
        <input type="text" id="schoolSearch" placeholder="๐ ุงุจุญุซ ุนู ูุฏุฑุณุฉ">
        <select id="schoolFilter" disabled>
          <option value="">ุงุฎุชุฑ ุงููุฏุฑุณุฉ</option>
        </select>
      </label>
    </section>

    <!-- ุดุฑูุท ุงูุชูุฏู -->
    <div id="progress-bar">
      <div id="progress"></div>
    </div>

    <!-- ุงูููุงุฐุฌ -->
    <form id="evaluationForm">

      <!-- ุงููุณู ุงูุฃูู -->
      <div class="form-step active">
        <h2>ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</h2>
        <div class="form-grid">
          <label>ุชุงุฑูุฎ ุงูุฒูุงุฑุฉ:
            <input type="date" id="visit_date" name="visit_date" required>
          </label>
          <input type="hidden" id="visit_day" name="visit_day">
          <input type="hidden" id="visit_month" name="visit_month">
          <input type="hidden" id="visit_year" name="visit_year">

          <label>ุงููุดุฑู ุงูุฒุงุฆุฑ:
            <input type="text" name="visitor" id="visitor" readonly>
          </label>
          <label>ุงูููุทูุฉ: <input type="text" name="region" id="region" readonly></label>
          <label>ุงููุฏููุฉ: <input type="text" name="city" id="city" readonly></label>
          <label>ุงุณู ุงููุฏุฑุณุฉ: <input type="text" name="school" id="school" readonly></label>

          <label>ุงูุฑูู ุงููุฒุงุฑู: <input type="text" name="code" id="code" required></label>

          <label>ุงุณู ุงูุญู/ุงูุดุงุฑุน: <input type="text" name="street"></label>
          <label>ุชุตููู ุงููุฏุฑุณุฉ: <input type="text" name="category"></label>
          <label>ุงููุฑุญูุฉ ุงูุชุนููููุฉ: <input type="text" name="stage"></label>
          <label>ุงููุฑุงุญู ุงูููุญูุฉ: <input type="text" name="extra_stages"></label>
          <label>ุชุงุฑูุฎ ุงููุญุต: <input type="date" name="inspection_date"></label>
          <label>ุนุฏุฏ ุงููุตูู: <input type="number" name="classes"></label>
          <label>ุดุจูุฉ ุงูููุงู ุชุตู ูููุฏุฑุณุฉ:
            <select name="water"><option>ูุนู</option><option>ูุง</option></select>
          </label>
          <label>ุดุจูุฉ ุงูุตุฑู ุงูุตุญู ุชุตู ูููุฏุฑุณุฉ:
            <select name="sewage"><option>ูุนู</option><option>ูุง</option></select>
          </label>
          <label>ุทุฑู ุงููุตูู ูููุฏุฑุณุฉ: <input type="text" name="access"></label>
          <label>ููููุฉ ุงููุจูู: <input type="text" name="ownership"></label>
        </div>
        <div class="form-navigation">
          <button type="button" class="next">ุงูุชุงูู</button>
        </div>
      </div>

      <!-- ุงููุณู ุงูุซุงูู -->
      <div class="form-step">
        <h2>ุงูุตุญุฉ ูุงูุณูุงูุฉ</h2>
        <div class="form-grid">
          <label>ูุฎุงุฑุฌ ุงูุทูุงุฑุฆ: <input type="text" name="emergency_exits"></label>
          <label>ูุถุฎุงุช ุงูุญุฑูู: <input type="text" name="fire_pumps"></label>
          <label>ุจูุฑุงุช ุฎุฑุทูู ุงูุญุฑูู: <input type="text" name="fire_hose_reels"></label>
          <label>ุทูุงูุงุช ุงูุญุฑูู: <input type="text" name="fire_extinguishers"></label>
          <label>ููุญุฉ ุชุญูู: <input type="text" name="control_panel"></label>
          <label>ููุงุดู ุฅูุฐุงุฑ ุงูุญุฑูู: <input type="text" name="smoke_detectors"></label>
          <label>ุฌุฑุณ ุงูุฐุงุฑ: <input type="text" name="fire_alarm"></label>
          <label>ุญูุงุฌุฒ ุงูุณูุงูุฉ: <input type="text" name="safety_barriers"></label>
          <label>ููุญุงุช ูุฎุงุฑุฌ ุงูุทูุงุฑุฆ: <input type="text" name="exit_signs"></label>
          <label>ุตูุงุฏูู ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ: <input type="text" name="first_aid"></label>
          <label>ููุงุท ุงูุชุฌูุน ูููุญุงุชูุง: <input type="text" name="assembly_points"></label>
          <label>ุงูุญูุงู ุงูููุดููุฉ: <input type="text" name="edges"></label>
          <label>ูุซุงุฆู ุงูุณูุงูุฉ: <input type="text" name="safety_docs"></label>
          <label>ูุตูุฉ ุงูุฏูุงุน ุงููุฏูู: <input type="text" name="civil_defense"></label>
          <label>ุงูุจูุงุจ ูุงูููุงุชูุญ: <input type="text" name="keys"></label>
        </div>
        <div class="form-navigation">
          <button type="button" class="prev">ุงูุณุงุจู</button>
          <button type="button" class="next">ุงูุชุงูู</button>
        </div>
      </div>

      <!-- ุงููุณู ุงูุซุงูุซ -->
      <div class="form-step">
        <h2>ุงูุนูุงุตุฑ ุงููุฏููุฉ</h2>
        <div class="form-grid">
          <label>ุญุงูุฉ ุงูุญูุงุฆุท: <input type="text" name="walls_condition"></label>
          <label>ุงูุณูุงูู ูุนูุงุตุฑูุง: <input type="text" name="stairs"></label>
          <label>ุงูููุงูุฐ: <input type="text" name="windows"></label>
          <label>ุงูุฃุจูุงุจ: <input type="text" name="doors"></label>
          <label>ุญุงูุฉ ุงูุฃุฑุถูุงุช: <input type="text" name="floors_condition"></label>
          <label>ุงูููุงูุฑ: <input type="text" name="light_wells"></label>
          <label>ุนุฒู ุงูุณุทุญ: <input type="text" name="roof_insulation"></label>
          <label>ุชุตุฑูู ุงูุณุทุญ: <input type="text" name="roof_drainage"></label>
          <label>ุฅุทุงุฑ ุงูุณุทุญ / ุงูุญูุงุฌุฒ: <input type="text" name="roof_frame"></label>
          <label>ููุญุฏุฑ ุฐูู ุงูุงุญุชูุงุฌุงุช ุงูุฎุงุตุฉ: <input type="text" name="accessibility_ramp"></label>
          <label>ุงูุญุงูุฉ ุงูุนุงูุฉ ููููุงุทู ุงูุฎุงุฑุฌูุฉ ูุงูุทุฑู: <input type="text" name="external_condition"></label>
          <label>ุงูุจูุงุจุงุช ุงูุฑุฆูุณูุฉ: <input type="text" name="main_gates"></label>
          <label>ุงูุณูุฑ: <input type="text" name="fence"></label>
          <label>ุงูุนูุงุตุฑ ุงููููุงููููุฉ: <input type="text" name="mechanical"></label>
          <label>ููุญุฉ ุงูุชูุฒูุน: <input type="text" name="distribution"></label>
          <label>ูุธุงู ุงูุชุฃุฑูุถ: <input type="text" name="earthing"></label>
          <label>ุฃูุธูุฉ ุงูุณูุงุนุงุช ูุงูุตูุช: <input type="text" name="sound"></label>
          <label>ุญุงูุฉ ุงูุฅุถุงุกุฉ ุงูุนุงูุฉ: <input type="text" name="lighting"></label>
          <label>ุฅุถุงุกุฉ ุงูุทูุงุฑุฆ: <input type="text" name="emergency_lighting"></label>
          <label>ุงูููุงุจุณ ููููุงุช ุงูุชูุฏูุฏ: <input type="text" name="sockets"></label>
          <label>ููููุงุช ุงูููุงุก: <input type="text" name="ac"></label>
          <label>ุงููุถุฎุงุช: <input type="text" name="pumps"></label>
          <label>ูุฑุงูุญ ุงูุดูุท: <input type="text" name="fans"></label>
          <label>ุงููุตุงุนุฏ: <input type="text" name="elevators"></label>
          <label>ุณุฎุงูุงุช ุงูููุงู: <input type="text" name="heaters"></label>
          <label>ุฎุฒุงูุงุช ุงูููุงู ุงูุฃุฑุถูุฉ: <input type="text" name="tank_ground"></label>
          <label>ุฎุฒุงูุงุช ุงูููุงู ุงูุนูููุฉ: <input type="text" name="tank_top"></label>
          <label>ุงูุญูุงุฌุฒ ูุงูุงุถุงูุงุช ุงูุนุดูุงุฆูุฉ: <input type="text" name="barriers"></label>
          <label>ุงูุชูุตููุงุช ุงูููุฑุจุงุฆูุฉ ุงูุนุดูุงุฆูุฉ: <input type="text" name="wiring"></label>
        </div>
        <div class="form-navigation">
          <button type="button" class="prev">ุงูุณุงุจู</button>
          <button type="submit">ุฅุฑุณุงู</button>
        </div>
      </div>
    </form>

    <!-- ุฃุฒุฑุงุฑ ุฅุถุงููุฉ -->
    <div class="form-navigation">
      <button type="button" id="newEntryBtn">๐ ุฅุฏุฎุงู ุฌุฏูุฏ</button>
      <button type="button" id="logoutBtn">๐ช ุฎุฑูุฌ</button>
    </div>
  </main>

  <!-- ุงูููุชุฑ -->
  <footer class="main-footer">
    <p>ุฌููุน ุงูุญููู ูุญููุธุฉ ูุดุฑูุฉ ุณูุงูุง ยฉ 2025</p>
  </footer>

  <script src="script.js"></script>

  <script>
    // ุงุณุชุฎุฑุงุฌ ุงูููู/ุงูุดูุฑ/ุงูุณูุฉ ูู ุงูุชุงุฑูุฎ
    document.getElementById("visit_date").addEventListener("change", function() {
      const date = new Date(this.value);
      const days = ["ุงูุฃุญุฏ","ุงูุฅุซููู","ุงูุซูุงุซุงุก","ุงูุฃุฑุจุนุงุก","ุงูุฎููุณ","ุงูุฌูุนุฉ","ุงูุณุจุช"];
      document.getElementById("visit_day").value = days[date.getDay()];
      document.getElementById("visit_month").value = (date.getMonth() + 1).toString().padStart(2, "0");
      document.getElementById("visit_year").value = date.getFullYear();
    });

    // ุชุญููู ุงุณู ุงููุดุฑู
    document.addEventListener("DOMContentLoaded", () => {
      const fullName = localStorage.getItem("fullName") || "ูุดุฑู";
      document.getElementById("visitor").value = fullName;

      document.getElementById("logoutBtn").addEventListener("click", () => {
        localStorage.clear();
        window.location.href = "login.html";
      });

      document.getElementById("newEntryBtn").addEventListener("click", () => {
        document.getElementById("evaluationForm").reset();
        document.getElementById("evaluationForm").style.display = "none";
        document.getElementById("regionFilter").value = "";
        document.getElementById("cityFilter").innerHTML = '<option value="">ุงุฎุชุฑ ุงููุฏููุฉ</option>';
        document.getElementById("cityFilter").disabled = true;
        document.getElementById("schoolFilter").innerHTML = '<option value="">ุงุฎุชุฑ ุงููุฏุฑุณุฉ</option>';
        document.getElementById("schoolFilter").disabled = true;
      });
    });

    // ุงูุชุญูู ูู ุงูุฎุทูุงุช (ูุน ุญู ูุดููุฉ required)
    document.addEventListener("DOMContentLoaded", () => {
      const steps = document.querySelectorAll(".form-step");
      const nextBtns = document.querySelectorAll(".next");
      const prevBtns = document.querySelectorAll(".prev");
      let currentStep = 0;

      function showStep(index) {
        steps.forEach((step, i) => {
          step.style.display = i === index ? "block" : "none";

          // โ ุฅุถุงูุฉ/ุฅุฒุงูุฉ required ููุท ููุญููู ุงูุธุงูุฑุฉ
          const inputs = step.querySelectorAll("input, select, textarea");
          inputs.forEach(inp => {
            if (i === index) {
              inp.setAttribute("required", inp.hasAttribute("data-original-required") || inp.required);
            } else {
              if (inp.hasAttribute("required")) {
                inp.setAttribute("data-original-required", "true");
                inp.removeAttribute("required");
              }
            }
          });
        });
      }

      showStep(currentStep);

      nextBtns.forEach(btn => {
        btn.addEventListener("click", () => {
          if (currentStep < steps.length - 1) {
            currentStep++;
            showStep(currentStep);
          }
        });
      });

      prevBtns.forEach(btn => {
        btn.addEventListener("click", () => {
          if (currentStep > 0) {
            currentStep--;
            showStep(currentStep);
          }
        });
      });
    });
  </script>
</body>
</html>
